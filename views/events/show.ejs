<%- include('../partials/header') %>
    <h1>
        <%= title %>
    </h1>

    <a id="add-event" href="/events/new">Add event</a>


    <table id="event-list">
        <thead>
            <tr>
                <th>Name</th>
                <th>Date</th>



            </tr>
        </thead>
        <tbody>
            <%events.forEach(function(e){  %>
                <tr>
                    <td>
                        <%= e.name %>
                    </td>
                    <td>
                        <%= e.date.toLocaleDateString() %>
                    </td>

                    <td><a href="/events/<%= e._id %>">SELECT</a></td>
                    <td>
                        <div>
                            <form action="/events/<%= e._id %>?_method=DELETE" class="delete-form" method="POST">
                                <button type="submit">X </button>
                            </form>
                        </div>
                    </td>
                </tr>
                <%}); %>

        </tbody>

    </table>

    <section id="event-details">
        <h2>Event Details</h2>

        <div>
            Event Name:
            <%= event.name %>
        </div>
        <div>
            Client Name:
            <%= event.client %>
        </div>
        <div>
            Date:
            <%= event.date %>
        </div>

        <div>
            Venue:
            <%= venue.name %>
        </div>
        <div>
            City:
            <%= venue.city %>
        </div>
        <div>
            State:
            <%= venue.state %>
        </div>
        <div>
            Duration:
            <%= event.duration %>
        </div>
        <div>
            Workers:
            <ul>
                <%- event.workers.map(w => 
                  `<li>${w.name} <small>${w.specialty}</small></li>`
                ).join('') %>
            </ul>
        </div>
        <br>

        <div>Add Workers to Event</div>
        <form id="add-worker-to-event" action="/events/<%= event._id %>/worker" method="POST">
            <select name="workerId">
            <%- workers.map(w => `<option value="${w._id}">${w.name}</option>`) %> 
            </select>
            <button type="submit">Add Worker to Event</button>
        </form>
        <a href="/events/<%= event._id %>/edit">Edit event details</a>
    </section>



    <%- include('../partials/footer') %>